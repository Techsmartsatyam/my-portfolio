<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tic Tac Toe — Modern</title>
  <style>
    :root{
      --bg:#0f1724;
      --card:#0b1220;
      --muted:#94a3b8;
      --accent:#8b5cf6;
      --accent-2:#06b6d4;
      --glass: rgba(255,255,255,0.04);
      --win: #16a34a;
      --lose: #ef4444;
      --glass-2: rgba(255,255,255,0.02);
      --shadow: 0 6px 20px rgba(2,6,23,0.7);
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: radial-gradient(1000px 600px at 10% 10%, rgba(159, 156, 167, 0.12), transparent 8%),
                  radial-gradient(700px 500px at 90% 90%, rgba(159, 165, 168, 0.08), transparent 8%),
                  var(--bg);
      color:#e6eef8;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;

    }
    body{
      background-color: rgb(199, 94, 94);
    }

    .container{
      width:100%;
      max-width:920px;
      background:linear-gradient(180deg,var(--card), rgba(11,17,32,0.7));
      border-radius:16px;
      padding:28px;
      box-shadow:var(--shadow);
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:24px;
      align-items:start;
    }
      .container{
    background-color:rgb(0, 255, 64);
  }


    .panel{
      background:linear-gradient(180deg,var(--glass), var(--glass-2));
      border:1px solid rgba(255,255,255,0.04);
      padding:18px;
      border-radius:12px;
      backdrop-filter: blur(6px);
    }

    
    header h1{margin:0;font-size:20px;letter-spacing:0.2px}
    header p{margin:6px 0 0;color:var(--muted);font-size:13px}

    .controls{margin-top:14px;display:flex;gap:8px;flex-wrap:wrap}
    .btn{
      background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px;color:inherit;cursor:pointer;font-weight:600;
      transition:all .18s ease;display:inline-flex;align-items:center;gap:8px
    }
    .btn:hover{transform:translateY(-3px);box-shadow:0 8px 30px rgba(11,17,32,0.6)}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#031026;border:0}

    .score{
      display:flex;gap:10px;margin-top:18px
    }
    .score .card{flex:1;padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03)}
    .score .num{font-size:20px;font-weight:700}
    .score small{color:var(--muted)}

    /* board */
    .board-wrap{display:flex;flex-direction:column;gap:14px}
    .board{
      width:100%;
      aspect-ratio:1/1;
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:10px;
      padding:18px;
      border-radius:14px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
      border:1px solid rgba(83, 238, 12, 0.04);
      align-items:stretch;justify-items:stretch;
    }
    .board{
      background-color:rgb(40, 92, 92);
    }

    .cell{
      background:transparent;border-radius:10px;border:1px dashed rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;font-size:44px;cursor:pointer;transition:all .14s ease;position:relative;user-select:none
    }
    .cell:hover{transform:translateY(-6px);box-shadow:0 14px 30px rgba(2,6,23,0.6)}

    .cell.disabled{cursor:default;opacity:0.9}
    .x{color:var(--accent);font-weight:900;text-shadow:0 4px 20px rgba(139,92,246,0.14)}
    .o{color:var(--accent-2);font-weight:900;text-shadow:0 4px 20px rgba(6,182,212,0.12)}

    .info{display:flex;align-items:center;justify-content:space-between}
    .turn{display:flex;gap:10px;align-items:center}
    .dot{width:12px;height:12px;border-radius:50%}
    .dot.x{background:var(--accent)}
    .dot.o{background:var(--accent-2)}
    .cell{
      background-color:black;
    }
.cell:hover{
  
  cursor: pointer;
  background-color:chocolate;
  color: #16a34a;
  box-shadow: 0 0 80px 30px;
}
    .line{
      position:absolute;pointer-events:none;left:0;top:0;width:100%;height:100%;
    }

    .result-modal{
      position:fixed;inset:0;display:grid;place-items:center;background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.9));z-index:60;opacity:0;visibility:hidden;transition:all .12s ease;padding:28px
    }
    .result-modal.show{opacity:1;visibility:visible}
    .result-card{background:linear-gradient(180deg,#0340d8, #071426);padding:22px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);text-align:center;min-width:260px}
    .result-card h2{margin:0 0 8px}
    .small-muted{color:var(--muted);font-size:13px}

    footer{margin-top:10px;color:var(--muted);font-size:13px}

    /* responsive */
    @media (max-width:880px){
      .container{grid-template-columns:1fr;}
      .board{aspect-ratio:1/1}
    }

  </style>
</head>
<body>
  <div class="container">
    <aside class="panel">
      <header>
        <h1>Tic — Tac —Game By Satyam</h1>
        <p>This is a Tic -Tac game created by Tech Smart Satyam
          the purpuse of this game to injoye your free time 
        </p>
      </header>

      <div class="controls">
        <button id="newGame" class="btn primary">New Game</button>
        <button id="undoBtn" class="btn" title="Undo last move">Undo</button>
        <button id="aiToggle" class="btn" aria-pressed="false">Play vs Computer: <strong id="aiModeLabel">Off</strong></button>
      </div>

      <div class="score">
        <div class="card">
          <div class="num" id="scoreX">0</div>
          <small>Your take X</small>
        </div>
        <div class="card">
          <div class="num" id="scoreDraw">0</div>
          <small>Draws</small>
        </div>
        <div class="card">
          <div class="num" id="scoreO">0</div>
          <small>Computer take (O) </small>
        </div>
      </div>

      <div style="margin-top:12px">
        <div class="small-muted">Difficulty</div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="btn" data-diff="easy">Easy</button>
          <button class="btn" data-diff="medium">Medium</button>
          <button class="btn" data-diff="hard">Hard</button>
        </div>
      </div>

      <footer>
        Tip: press a cell or use keyboard numbers 1–9 to play.
      </footer>
    </aside>

    <main class="panel board-wrap">
      <div class="info">
        <div class="turn">
          <div class="dot x"></div>
          <strong id="turnLabel">Your turn </strong>
        </div>
        <div>
          <small class="small-muted">Status: <span id="status">Ready</span></small>
        </div>
      </div>

      <div id="board" class="board" role="grid" aria-label="Tic tac toe board">
        <!-- 9 cells inserted by JS -->
      </div>
    </main>
  </div>

  <div id="result" class="result-modal" role="dialog" aria-modal="true">
    <div class="result-card">
      <h2 id="resultTitle">Result</h2>
      <p id="resultText" class="small-muted">--</p>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
        <button id="restart" class="btn primary">Play again</button>
        <button id="closeRes" class="btn">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Game state
    const boardEl = document.getElementById('board');
    const turnLabel = document.getElementById('turnLabel');
    const statusEl = document.getElementById('status');
    const resultModal = document.getElementById('result');
    const resultTitle = document.getElementById('resultTitle');
    const resultText = document.getElementById('resultText');

    const scoreX = document.getElementById('scoreX');
    const scoreO = document.getElementById('scoreO');
    const scoreDraw = document.getElementById('scoreDraw');

    const aiToggle = document.getElementById('aiToggle');
    const aiModeLabel = document.getElementById('aiModeLabel');

    let cells = Array(9).fill('');
    let current = 'X';
    let running = true;
    let history = [];

    // scores
    const score = { X:0, O:0, D:0 };

    // AI settings
    let aiOn = false;
    let difficulty = 'medium';

    function createBoard(){
      boardEl.innerHTML = '';
      for(let i=0;i<9;i++){
        const c = document.createElement('button');
        c.className = 'cell';
        c.setAttribute('data-i', i);
        c.setAttribute('aria-label', `cell ${i+1}`);
        c.setAttribute('role','button');
        c.addEventListener('click', onCellClick);
        boardEl.appendChild(c);
      }
    }

    function render(){
      const cellEls = boardEl.querySelectorAll('.cell');
      cellEls.forEach((el,i)=>{
        el.innerHTML = '';
        el.classList.remove('disabled');
        if(cells[i]){
          el.classList.add('disabled');
          const span = document.createElement('span');
          span.className = cells[i] === 'X' ? 'x' : 'o';
          span.textContent = cells[i];
          el.appendChild(span);
        }
      });
      turnLabel.textContent = `${current}'s turn`;
      statusEl.textContent = running ? 'In progress' : 'Paused';
    }

    function onCellClick(e){
      const i = Number(e.currentTarget.dataset.i);
      if(!running || cells[i]) return;
      makeMove(i,current);
      if(aiOn && running){
        // give CPU a short delay
        setTimeout(()=>{
          const aiMove = pickAIMove();
          if(aiMove !== null) makeMove(aiMove, 'O');
        }, 300);
      }
    }

    function makeMove(i, player){
      if(cells[i] || !running) return;
      cells[i] = player;
      history.push({i,player});
      checkGame();
      // switch only if still running
      if(running){
        current = (player === 'X') ? 'O' : 'X';
        render();
      }
    }

    function checkGame(){
      const wins = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      for(const w of wins){
        const [a,b,c] = w;
        if(cells[a] && cells[a] === cells[b] && cells[a] === cells[c]){
          // someone won
          running = false;
          highlightWin(w);
          const winner = cells[a];
          score[winner]++;
          updateScores();
          showResult(`${winner} wins!`, `${winner} captured the line.`);
          return;
        }
      }
      if(cells.every(Boolean)){
        running = false;
        score.D++;
        updateScores();
        showResult(`Draw`, `No one wins.`);
        return;
      }
    }

    function highlightWin(indices){
      // simple visual: add a linear gradient overlay on winning cells
      indices.forEach(i=>{
        const el = boardEl.querySelector(`.cell[data-i='${i}']`);
        if(el) el.style.boxShadow = '0 10px 34px rgba(0,0,0,0.6), inset 0 0 0 4px rgba(255,255,255,0.02)';
      });
    }

    function updateScores(){
      scoreX.textContent = score.X;
      scoreO.textContent = score.O;
      scoreDraw.textContent = score.D;
    }

    function showResult(title, text){
      resultTitle.textContent = title;
      resultText.textContent = text;
      resultModal.classList.add('show');
    }

    // basic AI: win if possible, block, take center, take corner, else random
    function pickAIMove(){
      const avail = cells.map((v,i)=> v ? null : i).filter(v=>v!==null);
      if(avail.length===0) return null;

      const lines = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];

      // helper to find a winning move for player
      const findWinning = (player)=>{
        for(const w of lines){
          const [a,b,c]=w;
          const vals=[cells[a],cells[b],cells[c]];
          if(vals.filter(x=>x===player).length===2 && vals.includes('')){
            const idx = w[vals.indexOf('')];
            return idx;
          }
        }
        return null;
      }

      if(difficulty === 'easy'){
        // random
        return avail[Math.floor(Math.random()*avail.length)];
      }

      // hard & medium: try win
      const winMove = findWinning('O');
      if(winMove !== null) return winMove;
      // block X
      const block = findWinning('X');
      if(block !== null) return block;

      if(difficulty === 'hard'){
        // fork opportunities & center
        if(cells[4] === '') return 4;
        const corners = [0,2,6,8].filter(i=>cells[i]==='');
        if(corners.length) return corners[Math.floor(Math.random()*corners.length)];
      }

      if(difficulty === 'medium'){
        if(cells[4] === '') return 4;
      }

      // fallback - random
      return avail[Math.floor(Math.random()*avail.length)];
    }

    // controls
    document.getElementById('newGame').addEventListener('click', ()=>{
      resetBoard();
    });
    document.getElementById('restart').addEventListener('click', ()=>{ resetBoard(); resultModal.classList.remove('show');});
    document.getElementById('closeRes').addEventListener('click', ()=>{ resultModal.classList.remove('show');});
    document.getElementById('undoBtn').addEventListener('click', ()=>{ undoMove();});

    aiToggle.addEventListener('click', ()=>{
      aiOn = !aiOn; aiToggle.setAttribute('aria-pressed', aiOn); aiModeLabel.textContent = aiOn ? 'On' : 'Off';
      // if enabling AI and it's O's turn make AI move
      if(aiOn && current === 'O' && running){
        setTimeout(()=>{
          const m = pickAIMove(); if(m !== null) makeMove(m, 'O');
        }, 220);
      }
    });

    // difficulty buttons
    document.querySelectorAll('[data-diff]').forEach(b=>{
      b.addEventListener('click', ()=>{
        difficulty = b.dataset.diff;
        // small UI feedback
        document.querySelectorAll('[data-diff]').forEach(x=>x.classList.remove('primary'));
        b.classList.add('primary');
      });
    });
    // set default medium
    document.querySelector('[data-diff="medium"]').classList.add('primary');

    function resetBoard(){
      cells = Array(9).fill('');
      running = true;
      current = 'X';
      history = [];
      // clear visuals
      boardEl.querySelectorAll('.cell').forEach(c=>{c.style.boxShadow='';});
      render();
    }

    function undoMove(){
      if(history.length===0 || !running) return;
      // if AI is on and last move was by AI, undo two moves to restore human turn
      const last = history.pop();
      cells[last.i] = '';
      if(aiOn && last.player === 'O' && history.length>0){
        const prior = history.pop(); cells[prior.i]='';
      }
      running = true;
      current = 'X';
      boardEl.querySelectorAll('.cell').forEach(c=>{c.style.boxShadow='';});
      render();
    }

    // keyboard support (1-9)
    window.addEventListener('keydown', (e)=>{
      if(e.key >= '1' && e.key <= '9'){
        const idx = Number(e.key) - 1;
        const target = boardEl.querySelector(`.cell[data-i='${idx}']`);
        if(target) target.click();
      }
      if(e.key === 'r') resetBoard();
      if(e.key === 'u') undoMove();
    });

    // init
    createBoard();
    render();

  </script>
</body>
</html>
